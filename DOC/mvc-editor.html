<html>
<body>
  <table border="1">
    <tr>
      <td valign="top" width="500">
        <p>Munkamenet:<select>
                        <option>Munkamenet1</option>   
                        <option>Munkamenet2</option>   
                        <option>Munkamenet3</option>   
                      </select>
                      <button>+</button>
                      <button>-</button>
           Komponens:<select>
                        <option>admin.Komponens1</option>   
                        <option>admin.Komponens2</option>   
                        <option>site.Komponens1</option>   
                      </select>
                      <button>+</button>
                      <button>-</button>                      
        </p>
        <table width="100%">
          <tr>
            <td style="border-style:solid; border-width:0px 1px 1px 0px">&nbsp;</td>
            <td style="border-style:solid; border-width:1px 1px 0px 0px; background-color:white">Model</td>
            <td style="border-style:solid; border-width:1px 1px 1px 0px; background-color:silver">Viewer</td>
            <td style="border-style:solid; border-width:1px 1px 1px 0px; background-color:silver">Controller</td>
            <td style="border-style:solid; border-width:1px 1px 1px 0px; background-color:silver">Helper</td>
            <td style="border-style:solid; border-width:1px 1px 1px 0px; background-color:silver">Tmpl</td>
            <td style="border-style:solid; border-width:1px 1px 1px 0px; background-color:silver">Language</td>
            <td style="border-style:solid; border-width:1px 1px 1px 0px; background-color:orange; width:20px;">&nbsp;+&nbsp;</td>
            <td style="border-style:solid; border-width:0px 0px 1px 0px">&nbsp;</td>
          </tr>
        </table>
        <p> public function
           <select>
              <option>xxxxxxx</option>   
              <option>xxxxxxx</option>   
              <option>xxxxxxx</option>   
           </select>
           <button>+</button>
           <button>-</button>
           <button>Check</button>
           <button><big>SAVE</big></button>
        </p>
        <textarea cols="80" rows="4">description</textarea>
        <textarea cols="80" rows="15">php editor</textarea>
        <p>Result type:<input type="text" /></p>
        <p>Next tasks:<input type="text" size="60" /></p>
      </td>
      <td valign="top">
        <h3>uses<button type="button">+</button></h3>
          <table width="100%">
            <tr>
              <td>$usersHelpers</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>$model</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>$userModel</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>$userTable</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>$userForm</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
        </table>
        <h3>Variables<button>+</button></h3>
          <table width="100%">
            <tr>
              <td>PUBLIC</td>
              <td>$format</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>SESSION</td>
              <td>$kutya</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>SESSION</td>
              <td>$macska</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>PARAMS</td>
              <td>$darab</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>LOCAL</td>
              <td>$szin</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>REQUEST</td>
              <td>$task</td>
              <td><button type="button">(edit)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>IMPORTED</td>
              <td>$model->status</td>
              <td><button type="button">(info)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            
          </table>
        <h3>Methods</h3>
          <table width="100%">
            <tr>
              <td>PUBLIC</td>
              <td>$this->add</td>
              <td><button type="button">(i)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>PROTECTED</td>
              <td>$this->count</td>
              <td><button type="button">(i)</button>
                  <button type="button">-</button>
              </td>
            </tr>
            <tr>
              <td>IMPORTED</td>
              <td>$helper->process</td>
              <td><button type="button">(i)</button>
                  <button type="button">-</button>
              </td>
            </tr>
          </table>
        <h3>Helps</h3>
        <a href="">Php</a>       <br />
        <a href="">Javascript</a> <br />
        <a href="">html</a>       <br />
        <a href="">CSS</a>       <br />
        <a href="">Joomla</a>   <br />
      </td>
    </tr>
  </table>
  
 
  <p>A variables rész tartalmazza az aktuális objektum propertyjeit, 
  paramétereit, lokál, session változóit, request használatát, a uses -ben 
  felsorolt objektumok public propertyeit</p>
  
  <p>A method rész tartalmazza az aktuális objektum methodusait, 
  a uses -ben felsorolt objektumok public methodusait</p>
  
  <p>Általános keresési elv: Ha a kért munkamenetben nem létezik a kért 
  objektum akkor olvassuk a lstmunkamentbõl</p>
  
  <p>Van egy komponens újrageneráló rész, ami adatbázis alapján a lastmunkamenet szerint
  php -kat generál. Az adatbázisban vannak "DELETED" statuszú rekordok is, ezeket természetesen
  nem tartalmazza a generált php</p>
    
  <p>A tábla és form editorok elsõ lépésként egyszerü textareak, késõbb fejletteb 
  változat is elképzelhetõ</p>  
    
  <h1>Jobb oldali blokk akciói</h1>
  
  <h2>Uses +</h2>
  <p>Új Adotform. Megadható a tipus (M,V,C,H, S, Table, Form és az elérési útvonal. 
  Az útvonal böngészõvel is választható. A böngészüben van lehetõség az 
  objektumok teljes törlésére is. 
  Lehetõség van új (üres ill inicializált)
  objektum létrehozására is</p>
  
    
  <h2>uses.elem (edit)</h2>
  <p>A megadott objektum tipustól függõ editor/info ablakot hoz fel.
  <ul><li>MVCHS objektumoknál: info a descriptionról</li>
      <li>Table esetén tábla editor</li>
      <li>Form esetén form editor</li>
  </ul>
  
  <h2>uses.elem (-)</h2>
  <p>az aktuális objektum uses listájából töröljük a megadott objektumot
      
  <h2>Variables + </h2>
  <p>Új adatform. Megadható Tipus (public, protected, private, param, &param local, session, request),
  név adattipus, leírás</p>
  
  <h2>Variables.elem (edit) </h2>
  <p>A kiválasztott adatt editor vagy info képernyõje. Az importált változóknál 
  csak info, a többinél editor.</p>
  
  <h2>Variables.elem (-) </h2>
  <p>A kiválasztott adatt törlése. Az importált változóknál 
  nem megengedett.</p>
    
  <h2>Method.elem (info) </h2>
  <p>A kiválasztott method info képernyõje (leirás, tipus, result tipus, nexttasks.</p>
  
  <h2>Variables.elem (-) </h2>
  <p>A kiválasztott method törlése. Az importált methodoknál nem megengedett.</p>
  
  
  <h1>Középsõ blokk akciói</h1>
  
  <h2>Munkamenet change</h2>
  <p>SAVE + választott új munkamenet/Model/__construct edit</p>
  
  <h2>Munkamenet +</h2>
  <p>SAVE + új munkamenet kreálása újmunkamenet/Model/__construct edit</p>
  
  <h2>Munkamenet -</h2>
  <p>Ellenörzõ kérdés után kigyüjteni, hogy a törlendõ munkamenet melyik komponenseket érintette,
  munkamenetet töröli, az érintett komponensek filejait újra generálja.
  A komponensek generálásánál figyelni a "DELETED" jelzésekre is!
  </p>
  
  <h2>Komponens change</h2>
  <p>SAVE + új komponens model/__construct edit</p>

  <h2>Komponens +</h2>
  <p>SAVE + új komponens létrehozása az adatbázisban, model/__construct edit</p>
  
  <h2>Komponens -</h2>
  <p>Ellenörzõ kérdés után: SAVE + komponens törlése az adatbázisból, komponens fájlok törlése, 
  regisztráció törlése</p>
  
  <h2>Fül change</h2>
  <p>SAVE + újfül szerint eltérõ müködés</p>
  <ul>
    <li>M,V,C,H,S: __construct edit</li>
    <li>Tmpl: a default tmpl editálása</li>
    <li>Language: HU-hu nyelvi fájl edit</li>
  </ul>
  
  <h2>Fül +</h2>
  <p>SAVE + új spec class létrehozó ürlap: név, leirás</p>
  
  <h2>Method név change</h2>
  <p>SAVE + a megadott method editálása (tmpl és language text editor, a többi php editor)</p>
  
  <h2>Method + </h2>
  <p>SAVE + Új adatform: tipus MVCHS methodnál php editor+method név imput box,
  tmpl -nél text editor + név input box, language -nál text editor + lng input box.</p>
  
  <h2>Method - </h2>
  <p>Ellenörzõ kérdés után method vagy tmpl vagy lng törlése az adatbázisból, 
  a __construct methodok, default templatek, en_HB language nem törölhetõ.
  componens fájlok újragenerálása</p>
  
  <h2>Check</h2>
  <p>Method ellenörzés (php szintaxis, változó használat, method hivás mód, request használat, 
  hivott tasknak átadott requestek</p>
  
  <h2>SAVE </h2>
  <p>tárolás adatbázisba, érintett komponens fileok újra generálása</p>

<h1>Általános irányelvek</h1>
<p>A komponens routereket és classokat úgy kell kialakitani, hogy igény esetén
egy task aktivizálni tudja aegy másik komponens routerét is. EZért nem szabad 
használni a JPATH_COMPONENT -et és a szabványos joomla getModel. getView 
eljárásokat. A controllerek inkludolják és kreálják fel a
MVCHS osztályokat, és ezeket átadják az MVCHS objektumoknak is
(saját getModel, getViewer, getHelpre, getSpecClass eljárások). 
FIGYELEM! lehet öbb class is egy fileban, tehát lehet kevesebb include mint
ahány use van!</p>

<h1>Logikai adatmodel</h1>

<i>A load methodusok az alárendelt objektmokat minden esetben
a korábbi brancheket is feldolgozva azok összefésülésével olvassák be 
(tehát az adott branchben nem változott elemeknek az utolsó érvényes
változatát használva). Viszont a save eljárások mindig az aktuális baranch_id -vel
tárolják a rekordot, ha meég nem volt ilyen akkor insert, ha már volt update </i>
<blockquote>
   <pre><code>
   A load megvalósitása sql -el:
   select w.id 
   from
     (
     select tulajdonos_azon_mezok, max(id) id
     from alrekord
     group by tulajdonos_azon_mezok
     where tulajdonos_azon_mezok -re vonatkozó feltétel
     ) w,
   inner join alrekord a on a.id = w.id
   where a.deleted = 0
   </code></pre>
</blockquote>

<pre><code>
  branch
    id
    name  (master or spec.név)
    desc
    author
    start
    stop
    status  (commited, active)
    components array of component
    bool = load(id)
    bool = save()
    
    
  component
    id
    deleted
    branch_id
    type (site, admin)
    name
    desc
    author
    authoremail
    web
    licence
    copyright
    version
    uses array of use
    classes array og class
    languages array of language
    tables array of table
    forms array of form
    bool = load(id)
    bool = save()
    bool = saveFiles()  

  use
    id
    deleted
    branch_id
    component
    type  (MVCHS)
    name
    path   FIGYELEM több class is lehet ugyanabban a file-ban!
  
  class
    id
    deleted
    branch_id
    component
    type (MVCHS)
    name
    desc  
    propertys array of property
    methods array of method
    tmpls array of tmpl
    bool = load(id)
    bool = save()
    bool = saveFiles()
 
 language
    id
    deleted
    branch_id
    component
    lng
    txt
    bool = load(id)
    bool = save()
    bool = saveFiles()
    
 table
    id
    deleted
    branch_id
    component
    name
    key
    desc
    tablefields array of tablefield
    bool = load(id)
    bool = save()
    bool = saveFiles()
    
 form
    id
    deleted
    branch_id
    component
    name
    desc
    array of formfield
    bool = load(id)
    bool = save()
    bool = saveFiles()
    
 property
    id
    deleted
    branch_id
    component
    class
    method
    type   (public, protected, private, paran, local, session, request)
    name
    datatype
    len
    desc
    default
    bool = load(id)
    bool = save()
    phpstr = makePhp()
    
 method
    id
    deleted
    branch_id
    component
    class
    type (public, protected, private, constructor)
    name
    desc
    params array of property
    locals array of property
    requests array of property
    sessions array of property
    nexts array of next
    code
    bool = load(id)
    bool = save()
    phpstr = makePhp()
 
 tmpl
    id
    deleted
    branch_id
    component
    class
    name
    code
    bool = load(id)
    bool = save()
    bool = saveFile()
    
 tablefield
   id
   deleted
   branch_id
   component
   table
   name
   datatype  (int, char, text, numeric, bool)
   len
   dec
   desc
   bool = load(id)
   bool = save()
   phpstr = makePhp()
   
 formfield
   id
   deleted
   branch_id
   component
   form
   name
   type (input, textarea, select, radio, checkbox, date)
   width
   height
   label
   options
   requed
   hidden
   readonly
   desc
   classname
   bool = load(id)
   bool = save()
   phpstr = makePhp()
           
 next
   id
   deleted
   branch_id
   component
   class
   method
   componentname
   taskname           
   bool = load(id)
   bool = save()
   phpstr = makePhp()

</code></pre>

  
<h1>Logikai adatbázis terv</h1>
<pre><code>

branch   (id,title,desc,author,start,stop,status)
  1:n component (id,branch_id,title,desc)
      1:n uses (id,branch_id, component_id, class_id, name,path)
      1:n class (id,branch_id, component_id, type:[M,V,C,H],title,desc)
          1:n property (id,branch_id, component_id, class_id, type,name,datatype,len,desc,default)
          1:n method (id,branch_id, component_id, class_id,type,name,desc,code,result,nexts)
              1:n var (id,branch_id, component_id, class_id, method_id, type,name, datatype, len, desc,default)
          1:n tmpl (id,branch_id, component_id, class_id, des, code)
      1:n language (id,branch_id, component_id, lng, code)
      1:n table    (id,branch_id, component_id, name, desc, __key)
          1:n tablefield (id,branch_id, component_id, table_id, name, datatype, len, desc, default)
      1:n form     (id,branch_id, component_id, name,desc)
          1:n formfield (id,branch_id, component_id, form_id, 
                         name, ctrltype, len, label, hidden, requed, readonly, 
                         options|sql, validator, classname)

</code></pre>
a component,class,uses,property,method,var, tmpl, language, table, form
rekordokban van egy "branch_id" mezõ. Így egy rekordban több változata is 
elérhetõ. Ugyanezekben a rekordokban van "DELETED" mezõ is.
A component fileok generálásakor a program a legnyagobb "branch_id" -jü, nem 
"DELETED" rekordokat használja.

<h1>Fileok, komponensek</h1>
<pre><code>
  com_comname/comname.php
  com_comname/controller.php
  com_comname/models/comname.php
  com_comname/tables/table1.php
  ...
  com_comname/views/comname/view.html.php
  com_comname/views/comname/tmpl/tmpl1.php
  ....
  com_comname/helpers/comname.php
  com_comname/spec1.php
  ...
  com_comname/models/forms/form1.xml
  ...
  languages/en-GB/com_comname.ini
  ...
  
  mindegyik class fileban uses alapján:
    include_once JPATH_ROOT/com_comname/controller.php;
    include_once JPATH_ROOT/com_comname/models/'Comname'.php;
    include_once JPATH_ROOT/com_comname/views/'Comname'/view.html.php;
    include_once JPATH_ROOT/com_comname/helpers/'Comname'.php;
    include_once JPATH_ROOT/com_comname/spec1.php;
    include_once JPATH_ROOT/com_comname/tables/table1.php;
    include_once JPATH_ROOT/com_comname/models/forms/form1.php;

    proertys alapján public, protected, private propertyk
    use alapján használt objektumok protected konténer változói

    function __construct() {
      use alapján a használt objektumok konstruálása
      (nem a szabványos joomla eljárásokkal)
    }

</code></pre>