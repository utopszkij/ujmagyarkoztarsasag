(function(){Slideshow.KenBurns=new Class({Extends:Slideshow,options:{pan:[100,100],zoom:[50,50]},initialize:function(b,d,a){a=a||{};a.cover=!1;a.overlap=!0;a.resize="fill";["pan","zoom"].each(function(a){this[a]!=void 0&&(typeOf(this[a])!="array"&&(this[a]=[this[a],this[a]]),this[a].map(function(a){return(a.toInt()||0).limit(0,100)}))},a);this.parent(b,d,a)},_show:function(b){this.image.retrieve("morph")||$$(this.a,this.b).set({tween:{duration:this.options.duration,link:"cancel",onStart:this._start.bind(this),
onComplete:this._complete.bind(this),property:"opacity"},morph:{duration:this.options.delay+this.options.duration*2,link:"cancel",transition:"linear"}});this.image.set("styles",{bottom:"auto",left:"auto",right:"auto",top:"auto"});var d=["top left","top right","bottom left","bottom right"][this.counter%4].split(" ");this.image.setStyles([0,0].associate(d));var a=this.cache[this.data.images[this._slide].replace(/([^?]+).*/,"$1")];dh=this.height/a.height;dw=this.width/a.width;delta=dw>dh?dw:dh;var f=
{},i=Number.random.apply(Number,this.options.zoom)/100+1,j=Math.abs(Number.random.apply(Number,this.options.pan)/100-1);["height","width"].each(function(e,b){var c=Math.ceil(a[e]*delta),g=(c*i).toInt();f[e]=[g,c];if(dw>dh||b)c=this[e]-this.image[e],g=(c*j).toInt(),f[d[b]]=[g,c]},this);var h=this.firstrun&&this.options.paused||this.paused;b||h?(this._center(this.image),this.image.get("morph").cancel(),h?this.image.get("tween").cancel().set(0).start(1):this.image.get("tween").cancel().set(1)):(this.image.get("morph").start(f),
this.image.get("tween").set(0).start(1))}})})();
